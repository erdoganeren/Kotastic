<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="res/main.css">
<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>Kotastic</title>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<script type="text/javascript" src="js/main.js"></script>
	<script type="text/javascript" src="js/positionMachine.js"></script>
	<script type="text/javascript" src="js/dogBagPoint.js"></script>
	<script type="text/javascript" src="js/dogBagManager.js"></script>
	<style>
		html,
		body,
		#map {
			height: 100%;
			margin: 0;
			padding: 0;
			width: 100%;
		}
	</style>

	<script src="https://maps.googleapis.com/maps/api/js"></script>
	<script src="https://rawgit.com/rcknr/basemap-google-maps/master/basemap-tiles.min.js"></script>


</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-light bg-light static-top mb-5 shadow">
	<div class="container">

		<img src="./res/Kotastic-LOGO.png" class="logo">
		<a class="navbar-brand" href="#">Kotastic</a>
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>


		<div class="collapse navbar-collapse" id="navbarResponsive">
			<ul class="navbar-nav ml-auto">
				<li class="nav-item active">
					<a class="nav-link" href="#">Home
						<span class="sr-only">(current)</span>
					</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="#">About</a>
				</li>


			</ul>
		</div>
	</div>
</nav>
<!-- Page Content -->
<div class="container">
	<div class="card border-0 shadow my-5">
		<div class="card-body p-5 center">
			<img src="res/Kotastic-LOGO.png" width="100" height="100">
			<h1 class="font-weight-light">Willkommen zum Hackaton: Projekt KOTASTIC</h1>
			<p class="lead">Mitglieder: Ciuciu Cristian, Erdogan Eren, Rubak Mario, Schunker Philipp!</p>
			<br><br>
			<form>
				<div class="form-row">
					<div class="col">
						<label for="input1">Start</label>
						<input id="input1" type="text" class="form-control" placeholder="Startpunkt eingeben">
					</div>
					<div class="col">
						<label for="input1">Start</label>
						<input id="input2" type="text" class="form-control" placeholder="Endpunkt eingeben">
					</div>
				</div>
			</form>


			<button class="btn btn-primary" type="submit">LOS</button>

			<div class="center" style="height: 700px; width: 800px;" >
				<div id="map" ></div>
			</div>

			<!--<div style="height: 700px"></div>-->
		</div>
	</div>
</div>




<script>
	let map;
	let icons
	let features;

	function setMarker(features, map) {
		for (var i = 0; i < features.length; i++) {
			var marker = new google.maps.Marker({
				position: features[i].position,
				title: features[i].markerTitle,
				icon: icons[features[i].type].icon,
				map: map
			});

			marker.setMap(map);
		};
	}

	function initMap() {
		var directionsService = new google.maps.DirectionsService();
		var directionsRenderer = new google.maps.DirectionsRenderer();
		map = new google.maps.Map(document.getElementById('map'), {
			zoom: 20,
			center: new google.maps.LatLng(48.25113105446648, 16.501423166734703),
		});

		icons = {
			poop: { //TODO: Change to copyright free source
				icon: 'icons/poop.png'
			}};
		features = [
			{
				position: new google.maps.LatLng(48.25113105446648, 16.501423166734703),
				markerTitle: "First Marker",
				type: 'poop'
			},{
				position: new google.maps.LatLng(48.136903037435864, 16.397476311182015),
				markerTitle: "Second Marker",
				type: 'poop'
			},
		];
		new Basemap(map);
		directionsRenderer.setMap(map);

		var onChangeHandler = function() {
			calculateAndDisplayRoute(directionsService, directionsRenderer);
		};
		document.getElementById('start').addEventListener('change', onChangeHandler);
		document.getElementById('end').addEventListener('change', onChangeHandler);
		//setMarker(features, map);
	}

	function calculateAndDisplayRoute(directionsService, directionsRenderer) {
		directionsService.route(
				{
					origin: {query: document.getElementById('start').value},
					destination: {query: document.getElementById('end').value},
					travelMode: 'WALKING'
				},
				function(response, status) {
					if (status === 'OK') {
						directionsRenderer.setDirections(response);
					} else {
						window.alert('Directions request failed due to ' + status);
					}
				});
	}
</script>
<script async defer
		src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBJVeimfjlbj5zCPRn6DUk6w6B26tQe6HM&callback=initMap">
</script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
</body>
</html>